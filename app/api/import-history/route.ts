import { NextResponse } from 'next/server';

// Mock data for import history
const mockData = [
  {
    id: '1',
    fileName: 'jobs_batch_2025_01_15.csv',
    importDateTime: '2025-01-15T10:30:00Z',
    totalFetched: 1250,
    totalImported: 1200,
    newJobs: 800,
    updatedJobs: 400,
    failedJobs: 50,
    status: 'success' as const,
  },
  {
    id: '2',
    fileName: 'jobs_batch_2025_01_14.csv',
    importDateTime: '2025-01-14T14:45:00Z',
    totalFetched: 980,
    totalImported: 950,
    newJobs: 600,
    updatedJobs: 350,
    failedJobs: 30,
    status: 'success' as const,
  },
  {
    id: '3',
    fileName: 'jobs_batch_2025_01_13.csv',
    importDateTime: '2025-01-13T09:15:00Z',
    totalFetched: 1100,
    totalImported: 890,
    newJobs: 500,
    updatedJobs: 390,
    failedJobs: 210,
    status: 'partial' as const,
  },
  {
    id: '4',
    fileName: 'jobs_batch_2025_01_12.csv',
    importDateTime: '2025-01-12T16:20:00Z',
    totalFetched: 750,
    totalImported: 720,
    newJobs: 450,
    updatedJobs: 270,
    failedJobs: 30,
    status: 'success' as const,
  },
  {
    id: '5',
    fileName: 'jobs_batch_2025_01_11.csv',
    importDateTime: '2025-01-11T11:00:00Z',
    totalFetched: 1300,
    totalImported: 650,
    newJobs: 400,
    updatedJobs: 250,
    failedJobs: 650,
    status: 'failed' as const,
  },
  {
    id: '6',
    fileName: 'jobs_batch_2025_01_10.csv',
    importDateTime: '2025-01-10T13:30:00Z',
    totalFetched: 2100,
    totalImported: 2050,
    newJobs: 1200,
    updatedJobs: 850,
    failedJobs: 50,
    status: 'success' as const,
  },
  {
    id: '7',
    fileName: 'jobs_batch_2025_01_09.csv',
    importDateTime: '2025-01-09T08:45:00Z',
    totalFetched: 1800,
    totalImported: 1650,
    newJobs: 900,
    updatedJobs: 750,
    failedJobs: 150,
    status: 'partial' as const,
  },
  {
    id: '8',
    fileName: 'jobs_batch_2025_01_08.csv',
    importDateTime: '2025-01-08T15:10:00Z',
    totalFetched: 950,
    totalImported: 920,
    newJobs: 600,
    updatedJobs: 320,
    failedJobs: 30,
    status: 'success' as const,
  },
  {
    id: '9',
    fileName: 'jobs_batch_2025_01_07.csv',
    importDateTime: '2025-01-07T12:00:00Z',
    totalFetched: 1400,
    totalImported: 1350,
    newJobs: 800,
    updatedJobs: 550,
    failedJobs: 50,
    status: 'success' as const,
  },
  {
    id: '10',
    fileName: 'jobs_batch_2025_01_06.csv',
    importDateTime: '2025-01-06T10:15:00Z',
    totalFetched: 1600,
    totalImported: 1400,
    newJobs: 850,
    updatedJobs: 550,
    failedJobs: 200,
    status: 'partial' as const,
  },
  {
    id: '11',
    fileName: 'jobs_batch_2025_01_05.csv',
    importDateTime: '2025-01-05T14:30:00Z',
    totalFetched: 1100,
    totalImported: 1080,
    newJobs: 700,
    updatedJobs: 380,
    failedJobs: 20,
    status: 'success' as const,
  },
  {
    id: '12',
    fileName: 'jobs_batch_2025_01_04.csv',
    importDateTime: '2025-01-04T09:45:00Z',
    totalFetched: 800,
    totalImported: 750,
    newJobs: 450,
    updatedJobs: 300,
    failedJobs: 50,
    status: 'success' as const,
  },
  {
    id: '13',
    fileName: 'jobs_batch_2025_01_03.csv',
    importDateTime: '2025-01-03T16:00:00Z',
    totalFetched: 1250,
    totalImported: 1100,
    newJobs: 650,
    updatedJobs: 450,
    failedJobs: 150,
    status: 'partial' as const,
  },
  {
    id: '14',
    fileName: 'jobs_batch_2025_01_02.csv',
    importDateTime: '2025-01-02T11:20:00Z',
    totalFetched: 900,
    totalImported: 880,
    newJobs: 500,
    updatedJobs: 380,
    failedJobs: 20,
    status: 'success' as const,
  },
  {
    id: '15',
    fileName: 'jobs_batch_2025_01_01.csv',
    importDateTime: '2025-01-01T13:00:00Z',
    totalFetched: 1500,
    totalImported: 1450,
    newJobs: 900,
    updatedJobs: 550,
    failedJobs: 50,
    status: 'success' as const,
  },
];

export async function GET() {
  try {
    // Simulate API delay
    await new Promise(resolve => setTimeout(resolve, 1000));
    
    return NextResponse.json(mockData);
  } catch (error) {
    console.error('Error fetching import history:', error);
    return NextResponse.json(
      { error: 'Failed to fetch import history' },
      { status: 500 }
    );
  }
}